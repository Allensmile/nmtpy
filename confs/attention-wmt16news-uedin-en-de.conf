# Main .py file which will be used for the model
model-type: attentionv2

# Embedding vector dimension
embedding-dim: 500

# RNN's hidden layer dimension
rnn-dim: 1024

# adadelta, adam, sgd or rmsprop
optimizer: adadelta

# Learning rate (only for SGD)
lrate: 1.0

# 0: no, otherwise weight decay factor
decay-c: 0.0

# -1: no, otherwise maximum gradient norm
clip-c: 1

# 0: no, otherwise alpha regularization factor
alpha-c: 0.

# batch size
batch-size: 80

# how much validation period will we wait
# to do early stopping
patience: 50

# Maximum number of epochs before stopping training
# Corpus takes ~50K iterations per epoch for batchsize = 80
# Corpus takes ~122K iterations per epoch for batchsize = 32
max-epochs: 200

# Stop after 5M iterations
max-iteration: 5000000

# validation frequency in terms of minibatch updates
valid-freq: 10000

# Use BLEU as additional validation metric
valid-metric: bleu

# Start validation after 1st epoch is finished
valid-start: 1

# Let's do early stopping with a reduced beam size for speed
beam-size: 2

# Weight init is Xavier
weight-init: xavier

# Postprocessing filter: BPE
filter: bpe

# 0: use all vocabulary, otherwise upper limit as integer
n-words-src: 0
n-words-trg: 0

# Where to save model params, weights and training log file
model-path: ~/models/shortpaper/wmt16news-en-de

# Dictionaries if necessary
dicts: { \
  "src":  "~/data/wmt16-news/en-de/train_bpe/corpus.parallel.tok.max50.tc.bpe.en.pkl", \
  "trg":  "~/data/wmt16-news/en-de/train_bpe/corpus.parallel.tok.max50.tc.bpe.de.pkl", \
  }

data: { \
  "train_src"     : '~/data/wmt16-news/en-de/train_bpe/corpus.parallel.tok.max50.tc.bpe.en', \
  "train_trg"     : '~/data/wmt16-news/en-de/train_bpe/corpus.parallel.tok.max50.tc.bpe.de', \
  "valid_src"     : '~/data/wmt16-news/en-de/train_bpe/newstest2013.tok.tc.bpe.en', \
  # This is for loss computation in training, still with BPE tokens.
  "valid_trg"     : '~/data/wmt16-news/en-de/train_bpe/newstest2013.tok.tc.bpe.de', \
  # This is the same file with BPE reverted to be used by nmt-translate for metric computation
  "valid_trg_orig": '~/data/wmt16-news/en-de/train_bpe/newstest2013.tok.tc.de', \
  }
